<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Cart | E-Shopper</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/prettyPhoto.css" rel="stylesheet">
    <link href="css/price-range.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
	<link href="css/main.css" rel="stylesheet">
	<link href="css/responsive.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->       
    <link rel="shortcut icon" href="images/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="images/ico/apple-touch-icon-57-precomposed.png">
</head><!--/head-->

<body>
	<header id="header"><!--header-->
		<div class="header_top"><!--header_top-->
			<div class="container">
				<div class="row">
					<div class="col-sm-6">
						<div class="contactinfo">
							<ul class="nav nav-pills">
								<li><a href=""><i class="fa fa-phone"></i> +2 95 01 88 821</a></li>
								<li><a href=""><i class="fa fa-envelope"></i> info@domain.com</a></li>
							</ul>
						</div>
					</div>
					<div class="col-sm-6">
						<div class="social-icons pull-right">
							<ul class="nav navbar-nav">
								<li><a href=""><i class="fa fa-facebook"></i></a></li>
								<li><a href=""><i class="fa fa-twitter"></i></a></li>
								<li><a href=""><i class="fa fa-linkedin"></i></a></li>
								<li><a href=""><i class="fa fa-dribbble"></i></a></li>
								<li><a href=""><i class="fa fa-google-plus"></i></a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div><!--/header_top-->
		
		<div class="header-middle"><!--header-middle-->
			<div class="container">
				<div class="row">
					<div class="col-md-4 clearfix">
						<div class="logo pull-left">
							<a href="index.html"><img src="images/home/logo.png" alt="" /></a>
						</div>
						<div class="btn-group pull-right clearfix">
							<div class="btn-group">
								<button type="button" class="btn btn-default dropdown-toggle usa" data-toggle="dropdown">
									USA
									<span class="caret"></span>
								</button>
								<ul class="dropdown-menu">
									<li><a href="">Canada</a></li>
									<li><a href="">UK</a></li>
								</ul>
							</div>
							
							<div class="btn-group">
								<button type="button" class="btn btn-default dropdown-toggle usa" data-toggle="dropdown">
									DOLLAR
									<span class="caret"></span>
								</button>
								<ul class="dropdown-menu">
									<li><a href="">Canadian Dollar</a></li>
									<li><a href="">Pound</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="col-md-8 clearfix">
						<div class="shop-menu clearfix pull-right">
							<ul class="nav navbar-nav">
								<li><a href=""><i class="fa fa-user"></i> Account</a></li>
								<li><a href=""><i class="fa fa-star"></i> Wishlist</a></li>
								<li><a href="checkout.html"><i class="fa fa-crosshairs"></i> Checkout</a></li>
								<li><a href="cart.html"><i class="fa fa-shopping-cart"></i> Cart</a></li>
								<li><a href="login.html"><i class="fa fa-lock"></i> Login</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div><!--/header-middle-->
	
		<div class="header-bottom"><!--header-bottom-->
			<div class="container">
				<div class="row">
					<div class="col-sm-9">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
						</div>
						<div class="mainmenu pull-left">
							<ul class="nav navbar-nav collapse navbar-collapse">
								<li><a href="index.html">Home</a></li>
								<li class="dropdown"><a href="#">Shop<i class="fa fa-angle-down"></i></a>
                                    <ul role="menu" class="sub-menu">
                                        <li><a href="shop.html">Products</a></li>
										<li><a href="product-details.html">Product Details</a></li> 
										<li><a href="checkout.html">Checkout</a></li> 
										<li><a href="cart.html" class="active">Cart</a></li> 
										<li><a href="login.html">Login</a></li> 
                                    </ul>
                                </li> 
								<li class="dropdown"><a href="#">Blog<i class="fa fa-angle-down"></i></a>
                                    <ul role="menu" class="sub-menu">
                                        <li><a href="blog.html">Blog List</a></li>
										<li><a href="blog-single.html">Blog Single</a></li>
                                    </ul>
                                </li> 
								<li><a href="404.html">404</a></li>
								<li><a href="contact-us.html">Contact</a></li>
							</ul>
						</div>
					</div>
					<div class="col-sm-3">
						<div class="search_box pull-right">
							<input type="text" placeholder="Search"/>
						</div>
					</div>
				</div>
			</div>
		</div><!--/header-bottom-->
	</header><!--/header-->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script>
		$(document).ready(function(){
			// lấy dữ liệu từ local
			var laygiulieuLocal = localStorage.getItem("objCha")
			if(laygiulieuLocal){
				laygiulieuLocal = JSON.parse(laygiulieuLocal) // chuyển đổi kiểu dữ liệu 
				//console.log(laygiulieuLocal)
			}
			
			var html = "";  
			total =0
			Object.keys(laygiulieuLocal).map(function(key, index){
				// bỏ ký tự đô la để tính tiền trong price
				var price =laygiulieuLocal[key]["price"].replace("$", "")
				var qty = laygiulieuLocal[key]["qty"]
				// nhân giá với số lượng trong giỏ hàng
				var tong =parseFloat(price) *parseInt(qty)

				total = total + tong
				

				html +=  '<tr id= "'+laygiulieuLocal[key]["id"]+'"> ' +
					
							'<td class="cart_product">' + 
								'<a href=""><img style="width: 110px;"src ="'+ laygiulieuLocal[key]["img"]+'"alt=""></a>'+
							'</td>'+

							'<td class="cart_description">' + 
								'<h4><a href=""> ' + laygiulieuLocal[key]["name"] + '</a></h4>' +
								'<p>Web ID:' + laygiulieuLocal[key]["id"] + '</p>'+
							'</td>'+

							'<td class="cart_price">' + 
								'<p>'+ laygiulieuLocal[key]["price"] +'</p>'+
							'</td>'+

							'<td class="cart_quantity">' +
								'<div class="cart_quantity_button">'+
									'<a class="cart_quantity_up" href=""> + </a>'+
									'<input class="cart_quantity_input" type="text" name="quantity" value="'+laygiulieuLocal[key]["qty"]+'"' +laygiulieuLocal[key]["qty"]+'"  autocomplete="off" size="2">'+
									'<a class="cart_quantity_down" href=""> - </a>'+ 
								'</div>'+
							'</td>'+

							'<td class="cart_total">'+
								'<p class="cart_total_price">'+ tong +'</p>'+
							'</td>'+

							'<td class="cart_delete">'+
								'<a class="cart_quantity_delete" href=""><i class="fa fa-times"></i></a>'+
							'</td>'+

				'</tr>';
				})	
				console.log(html)
				$("table tbody").append(html);
		
			$(".total_tong").text(total)
				// nut +
			$(".cart_quantity_up").click(function(){
			
				$("a").removeAttr("href")
				
				var gia_tri_thay_doi = $(this).closest(".cart_quantity_button").find(".cart_quantity_input").val();
				gia_tri_thay_doi++;
					$(this).closest(".cart_quantity_button").find(".cart_quantity_input").val(gia_tri_thay_doi)
			
				var gia_tri_price = $(".cart_price p").text()
				var gia = parseFloat(gia_tri_price.replace("$", ""))
				var tong =  gia * gia_tri_thay_doi

				//console.log(tong)
				


				
				// đưa tong vào mỗi ô tương ứng khi click vào
				$(this).closest("tr").find(".cart_total_price").text(tong);
				

				

				
				var id =$(this).closest("tr").attr("id")			
				if(laygiulieuLocal[id]){
					//console.log(id)
					// bieens tang qty trong local len 
					laygiulieuLocal[id]['qty'] = gia_tri_thay_doi;
					
					
				  }  
				  
				  total =0;
				  Object.keys(laygiulieuLocal).map(function(key, index){
					  // bỏ ký tự đô la để tính tiền trong price
					  var price =laygiulieuLocal[key]["price"].replace("$", "")
					  var qty = laygiulieuLocal[key]["qty"]
					  // nhân giá với số lượng trong giỏ hàng
					  var tong =parseFloat(price) *parseInt(qty)
  
					  total = total + tong
					  
				  })
				  $(".total_tong").text(total)


				  var xx = JSON.stringify(laygiulieuLocal)
				  localStorage.setItem("objCha",xx)


				
					  
				 

				
			})
			// nut -
			$(".cart_quantity_down").click(function(){
				$("a").removeAttr("href")
				

				var y = $(this).closest(".cart_quantity_button").find(".cart_quantity_input").val();
					y--;

				var gia_tri_price = $(".cart_price p").text()
				var gia = parseFloat(gia_tri_price.replace("$", ""))
				var tong =  gia *y
				//console.log(tong)
				// đưa tong vào mỗi ô tương ứng khi click vào
				$(this).closest("tr").find(".cart_total_price").text(tong);	
				if(y <=1){
					alert("ko xoa product cuối")
					return;
				}
				
					// goi ham tinh toan 
				//	goiham();
					//_____________-
				$(this).closest(".cart_quantity_button").find(".cart_quantity_input").val(y)
				

				

				// lấy id ra 
				var id =$(this).closest("tr").attr("id")			
				if(laygiulieuLocal[id]){
					//console.log(id)
					// bieens tang qty trong local len 
					laygiulieuLocal[id]['qty'] = y;
				  }  
				//console.log(laygiulieuLocal)
				// Cập nhật dữ liệu trong localStorage
					// goi ham tinh toan 
					goiham();
					//_____________-
				var xx = JSON.stringify(laygiulieuLocal)
				localStorage.setItem("objCha",xx)

							
				
			})
			

			// nut delete
			$(".cart_quantity_delete").click(function(){
				$("a").removeAttr("href")
				var xoa_pr = $(this).closest('tr');
				xoa_pr.remove();

				var tr = $(this).closest('tr');
				
					
				
				tr.remove();
				
				
				var id = tr.attr('id');
				if (laygiulieuLocal[id]) {
					delete laygiulieuLocal[id];
				}
				// goi ham tinh toan 
				goiham();
				//_____________-
				var xx = JSON.stringify(laygiulieuLocal)
				localStorage.setItem("objCha",xx)
			})
		
		function goiham(){
			total =0;
				Object.keys(laygiulieuLocal).map(function(key, index){
					// bỏ ký tự đô la để tính tiền trong price
					var price =laygiulieuLocal[key]["price"].replace("$", "")
					var qty = laygiulieuLocal[key]["qty"]
					// nhân giá với số lượng trong giỏ hàng
					
					var tong =parseFloat(price) *parseInt(qty)

					total = total + tong
					
				})
				$(".total_tong").text(total)
		}

		
		})
	</script>
	<!-- Tinh total lớn dưới cùng = các total nhỏ công lại
Click +, - và delete thì total này cũng thay đổi theo
 -->

	<!-- Sau khi hiển thị ra table thi viết hàm :
 - click vào nut + (chú y bỏ thuộc tính href đi, đây là thuộc tính để chuyển trang):
   + tăng qty và total lên mà k cần reload trang, dùng hàm closest để tính toán trực tiếp thay đổi trên màn hinh.
   + lưu qty mới vào product đang có trong local, để khi reload trang thì nó hiện thi qty mới ra lại (vì data hiện thị ra table dc lấy trong local)

- click vào nut trừ tương tự - nhưng chú y, khi giảm qty <=1 thì thông báo k dc xoá product cuối cùng.

- click vào nut delete:
  + xoá the html TR của product này trên màn hình (search google: jquery remove html để xem cú pháp)
  + xoá product này trong local
 -->
	<!-- Qua trang cart.html lấy product đã lưu trong localstorage ra và hiện thị ra table y như html đang làm mẫu trong bài. (tương tự bài form mới làm trước đó)
Và tính total = price * qty.
Chú y price đang dính dấu "$" nên tìm cách loại bỏ dấu này trước khi tính total
(dùng hàm replace trong jquery) -->
	<section id="cart_items">
		<div class="container">
			<div class="breadcrumbs">
				<ol class="breadcrumb">
				  <li><a href="#">Home</a></li>
				  <li class="active">Shopping Cart</li>
				</ol>
			</div>
			<div class="table-responsive cart_info">
				<table class="table table-condensed">
					<thead>
						<tr class="cart_menu">
							<td class="image">Item</td>
							<td class="description"></td>
							<td class="price">Price</td>
							<td class="quantity">Quantity</td>
							<td class="total">Total</td>
							<td></td>
						</tr>
					</thead>
					<tbody>
						
					</tbody>
				</table>
			</div>
		</div>
	</section> <!--/#cart_items-->

	<section id="do_action">
		<div class="container">
			<div class="heading">
				<h3>What would you like to do next?</h3>
				<p>Choose if you have a discount code or reward points you want to use or would like to estimate your delivery cost.</p>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="chose_area">
						<ul class="user_option">
							<li>
								<input type="checkbox">
								<label>Use Coupon Code</label>
							</li>
							<li>
								<input type="checkbox">
								<label>Use Gift Voucher</label>
							</li>
							<li>
								<input type="checkbox">
								<label>Estimate Shipping & Taxes</label>
							</li>
						</ul>
						<ul class="user_info">
							<li class="single_field">
								<label>Country:</label>
								<select>
									<option>United States</option>
									<option>Bangladesh</option>
									<option>UK</option>
									<option>India</option>
									<option>Pakistan</option>
									<option>Ucrane</option>
									<option>Canada</option>
									<option>Dubai</option>
								</select>
								
							</li>
							<li class="single_field">
								<label>Region / State:</label>
								<select>
									<option>Select</option>
									<option>Dhaka</option>
									<option>London</option>
									<option>Dillih</option>
									<option>Lahore</option>
									<option>Alaska</option>
									<option>Canada</option>
									<option>Dubai</option>
								</select>
							
							</li>
							<li class="single_field zip-field">
								<label>Zip Code:</label>
								<input type="text">
							</li>
						</ul>
						<a class="btn btn-default update" href="">Get Quotes</a>
						<a class="btn btn-default check_out" href="">Continue</a>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="total_area">
						<ul>
							<li>Cart Sub Total <span>$59</span></li>
							<li>Eco Tax <span>$2</span></li>
							<li>Shipping Cost <span>Free</span></li>
							<li>Toxtal <span class="total_tong">$61</span></li>
						</ul>
							<a class="btn btn-default update" href="">Update</a>
							<a class="btn btn-default check_out" href="">Check Out</a>
					</div>
				</div>
			</div>
		</div>
	</section><!--/#do_action-->

	<footer id="footer"><!--Footer-->
		<div class="footer-top">
			<div class="container">
				<div class="row">
					<div class="col-sm-2">
						<div class="companyinfo">
							<h2><span>e</span>-shopper</h2>
							<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,sed do eiusmod tempor</p>
						</div>
					</div>
					<div class="col-sm-7">
						<div class="col-sm-3">
							<div class="video-gallery text-center">
								<a href="#">
									<div class="iframe-img">
										<img src="images/home/iframe1.png" alt="" />
									</div>
									<div class="overlay-icon">
										<i class="fa fa-play-circle-o"></i>
									</div>
								</a>
								<p>Circle of Hands</p>
								<h2>24 DEC 2014</h2>
							</div>
						</div>
						
						<div class="col-sm-3">
							<div class="video-gallery text-center">
								<a href="#">
									<div class="iframe-img">
										<img src="images/home/iframe2.png" alt="" />
									</div>
									<div class="overlay-icon">
										<i class="fa fa-play-circle-o"></i>
									</div>
								</a>
								<p>Circle of Hands</p>
								<h2>24 DEC 2014</h2>
							</div>
						</div>
						
						<div class="col-sm-3">
							<div class="video-gallery text-center">
								<a href="#">
									<div class="iframe-img">
										<img src="images/home/iframe3.png" alt="" />
									</div>
									<div class="overlay-icon">
										<i class="fa fa-play-circle-o"></i>
									</div>
								</a>
								<p>Circle of Hands</p>
								<h2>24 DEC 2014</h2>
							</div>
						</div>
						
						<div class="col-sm-3">
							<div class="video-gallery text-center">
								<a href="#">
									<div class="iframe-img">
										<img src="images/home/iframe4.png" alt="" />
									</div>
									<div class="overlay-icon">
										<i class="fa fa-play-circle-o"></i>
									</div>
								</a>
								<p>Circle of Hands</p>
								<h2>24 DEC 2014</h2>
							</div>
						</div>
					</div>
					<div class="col-sm-3">
						<div class="address">
							<img src="images/home/map.png" alt="" />
							<p>505 S Atlantic Ave Virginia Beach, VA(Virginia)</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class="footer-widget">
			<div class="container">
				<div class="row">
					<div class="col-sm-2">
						<div class="single-widget">
							<h2>Service</h2>
							<ul class="nav nav-pills nav-stacked">
								<li><a href="">Online Help</a></li>
								<li><a href="">Contact Us</a></li>
								<li><a href="">Order Status</a></li>
								<li><a href="">Change Location</a></li>
								<li><a href="">FAQ’s</a></li>
							</ul>
						</div>
					</div>
					<div class="col-sm-2">
						<div class="single-widget">
							<h2>Quock Shop</h2>
							<ul class="nav nav-pills nav-stacked">
								<li><a href="">T-Shirt</a></li>
								<li><a href="">Mens</a></li>
								<li><a href="">Womens</a></li>
								<li><a href="">Gift Cards</a></li>
								<li><a href="">Shoes</a></li>
							</ul>
						</div>
					</div>
					<div class="col-sm-2">
						<div class="single-widget">
							<h2>Policies</h2>
							<ul class="nav nav-pills nav-stacked">
								<li><a href="">Terms of Use</a></li>
								<li><a href="">Privecy Policy</a></li>
								<li><a href="">Refund Policy</a></li>
								<li><a href="">Billing System</a></li>
								<li><a href="">Ticket System</a></li>
							</ul>
						</div>
					</div>
					<div class="col-sm-2">
						<div class="single-widget">
							<h2>About Shopper</h2>
							<ul class="nav nav-pills nav-stacked">
								<li><a href="">Company Information</a></li>
								<li><a href="">Careers</a></li>
								<li><a href="">Store Location</a></li>
								<li><a href="">Affillate Program</a></li>
								<li><a href="">Copyright</a></li>
							</ul>
						</div>
					</div>
					<div class="col-sm-3 col-sm-offset-1">
						<div class="single-widget">
							<h2>About Shopper</h2>
							<form action="#" class="searchform">
								<input type="text" placeholder="Your email address" />
								<button type="submit" class="btn btn-default"><i class="fa fa-arrow-circle-o-right"></i></button>
								<p>Get the most recent updates from <br />our site and be updated your self...</p>
							</form>
						</div>
					</div>
					
				</div>
			</div>
		</div>
		
		<div class="footer-bottom">
			<div class="container">
				<div class="row">
					<p class="pull-left">Copyright © 2013 E-SHOPPER Inc. All rights reserved.</p>
					<p class="pull-right">Designed by <span><a target="_blank" href="http://www.themeum.com">Themeum</a></span></p>
				</div>
			</div>
		</div>
		
	</footer><!--/Footer-->
	


    <script src="js/jquery.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.scrollUp.min.js"></script>
    <script src="js/jquery.prettyPhoto.js"></script>
    <script src="js/main.js"></script>
</body>
</html>